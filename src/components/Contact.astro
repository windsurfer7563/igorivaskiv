---
const FORMSPREE_ID = import.meta.env.PUBLIC_FORMSPREE_ID;
const configured = Boolean(FORMSPREE_ID);
const formAction = configured ? `https://formspree.io/f/${FORMSPREE_ID}` : undefined;
---
<section id="contact" class="bg-contrast-light dark:bg-black w-full py-16 md:py-24 mt-16">
  <div class="max-w-3xl mx-auto px-4 sm:px-8 md:px-10 text-center">
    <h2 class="text-3xl font-bold tracking-tight text-white sm:text-4xl">Ready to Optimize Your Workflow?</h2>
    <p class="mt-4 text-lg leading-8 text-gray-300">Let's collaborate to build efficient solutions for your engineering challenges. Reach out today for a consultation.</p>
    <form class="mt-10 mx-auto max-w-xl" method="POST" action={formAction} onsubmit={configured ? undefined : 'event.preventDefault()'}>
      {
        configured ? null : (
          <p class="mb-6 text-sm text-yellow-300">
            Contact form isnâ€™t configured. Set PUBLIC_FORMSPREE_ID (or repo secret FORMSPREE_ID) to enable submissions.
          </p>
        )
      }
      <div class="grid grid-cols-1 gap-x-8 gap-y-6 sm:grid-cols-2">
        <div>
          <label for="name" class="sr-only">Name</label>
          <input id="name" name="name" type="text" autocomplete="name" placeholder="Your Name" required class="block w-full rounded-lg border-0 bg-white/5 px-3.5 py-2 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-secondary sm:text-sm sm:leading-6 placeholder:text-gray-400" />
        </div>
        <div>
          <label for="company" class="sr-only">Company</label>
          <input id="company" name="company" type="text" autocomplete="organization" placeholder="Company Name" class="block w-full rounded-lg border-0 bg-white/5 px-3.5 py-2 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-secondary sm:text-sm sm:leading-6 placeholder:text-gray-400" />
        </div>
        <div class="sm:col-span-2">
          <label for="email" class="sr-only">Email</label>
          <input id="email" name="email" type="email" autocomplete="email" placeholder="Email Address" required class="block w-full rounded-lg border-0 bg-white/5 px-3.5 py-2 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-secondary sm:text-sm sm:leading-6 placeholder:text-gray-400" />
        </div>
        <div class="sm:col-span-2">
          <label for="message" class="sr-only">Message</label>
          <textarea id="message" name="message" rows="4" placeholder="Your Message" required class="block w-full rounded-lg border-0 bg-white/5 px-3.5 py-2 text-white shadow-sm ring-1 ring-inset ring-white/10 focus:ring-2 focus:ring-inset focus:ring-secondary sm:text-sm sm:leading-6 placeholder:text-gray-400"></textarea>
        </div>
      </div>
      <input type="hidden" name="_subject" value="New message from portfolio site" />
      <input type="text" name="_gotcha" class="hidden" style="display:none" autocomplete="off" tabindex="-1" />
      <div class="mt-10">
        <button type="submit" disabled={!configured} class="w-full sm:w-auto flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-8 bg-secondary text-contrast-light text-base font-bold leading-normal tracking-[0.015em] hover:bg-opacity-90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors mx-auto">
          <span class="truncate">Send Message</span>
        </button>
      </div>
    </form>
  </div>
</section>
